model {
  # Sub-model 2: age-specific prevalence:
  for (i in 1:5) {
    omega.age[i] ~ dlnorm(mu.log[i], sigma.log[i])
  }
  
  # Sub-model 3: vaccine-efficacy against infection:
  # model parmaeters abbreviated by .vac
  for (i in 1:Nstud.vac) {
    rA.vac[i] ~ dbin(pA.vac[i], nA.vac[i])
    rB.vac[i] ~ dbin(pB.vac[i], nB.vac[i])
    
    logit(pA.vac[i]) <- mu.vac[i]
    logit(pB.vac[i]) <- mu.vac[i] + delta.vac[i]
    
    mu.vac[i] ~ dnorm(0, 1.0e-5)
    delta.vac[i] ~ dnorm(psi.vac, prec.vac)
    }
  # Priors for sub-model 3:
  psi.vac ~ dnorm(0, 1)
  tau.vac ~ dunif(0, 1)
  prec.vac <- 1 / pow(tau.vac, 2)
  
  OR.vac <- exp(psi.vac)
  pEfficacy.vac <- (OR.vac / 1 + OR.vac)
 
}

